const perguntasCinema = {
  normais: [
    {
      pergunta: "🎬 Quem dirigiu o filme 'Titanic'?",
      opcoes: ["Steven Spielberg", "James Cameron", "Christopher Nolan", "Martin Scorsese"],
      resposta: "James Cameron"
    },
    {
      pergunta: "🏆 Qual filme ganhou o Oscar de Melhor Filme em 1994?",
      opcoes: ["Pulp Fiction", "Forrest Gump", "Um Sonho de Liberdade", "O Rei Leão"],
      resposta: "Forrest Gump"
    },
    {
      pergunta: "🧙♂️ Qual é o nome do hobbit interpretado por Elijah Wood?",
      opcoes: ["Bilbo", "Frodo", "Sam", "Merry"],
      resposta: "Frodo"
    },
    {
      pergunta: "🐻 Em que filme Leonardo DiCaprio finalmente ganhou um Oscar?",
      opcoes: ["O Lobo de Wall Street", "Titanic", "A Origem", "O Regresso"],
      resposta: "O Regresso"
    },
    {
      pergunta: "💜 Quem é o vilão principal em 'Vingadores: Guerra Infinita'?",
      opcoes: ["Ultron", "Thanos", "Loki", "Kang"],
      resposta: "Thanos"
    },
    {
      pergunta: "🤠 Qual é o nome do brinquedo cowboy em 'Toy Story'?",
      opcoes: ["Buzz", "Woody", "Andy", "Jessie"],
      resposta: "Woody"
    },
    {
      pergunta: "⭐ Qual filme tem a frase: 'Eu sou seu pai'?",
      opcoes: ["Star Wars: Uma Nova Esperança", "Star Wars: O Império Contra-Ataca", "Matrix", "Blade Runner"],
      resposta: "Star Wars: O Império Contra-Ataca"
    },
    {
      pergunta: "🪄 Qual atriz interpretou Hermione Granger?",
      opcoes: ["Emma Watson", "Emma Stone", "Natalie Portman", "Anne Hathaway"],
      resposta: "Emma Watson"
    },
    {
      pergunta: "🦕 Em que ano foi lançado o primeiro 'Jurassic Park'?",
      opcoes: ["1990", "1993", "1996", "1999"],
      resposta: "1993"
    },
    {
      pergunta: "🎈 Qual é o nome do palhaço assassino em 'It'?",
      opcoes: ["Bozo", "Twisty", "Pennywise", "Joker"],
      resposta: "Pennywise"
    }
  ],
  dificeis: [
    {
      pergunta: "🎭 Quem dirigiu 'Cidadão Kane' (1941)?",
      opcoes: ["Orson Welles", "Alfred Hitchcock", "John Ford", "Billy Wilder"],
      resposta: "Orson Welles"
    },
    {
      pergunta: "🎪 Em que filme Marlon Brando disse 'Eu poderia ter sido alguém'?",
      opcoes: ["O Poderoso Chefão", "Sindicato de Ladrões", "Apocalypse Now", "Um Bonde Chamado Desejo"],
      resposta: "Sindicato de Ladrões"
    },
    {
      pergunta: "🎨 Qual filme de Akira Kurosawa inspirou 'Star Wars'?",
      opcoes: ["Rashomon", "Os Sete Samurais", "A Fortaleza Escondida", "Yojimbo"],
      resposta: "A Fortaleza Escondida"
    },
    {
      pergunta: "🎬 Quem foi o primeiro ator a recusar um Oscar?",
      opcoes: ["Marlon Brando", "George C. Scott", "Woody Allen", "Sacheen Littlefeather"],
      resposta: "George C. Scott"
    },
    {
      pergunta: "🎞️ Qual foi o primeiro filme com som sincronizado?",
      opcoes: ["O Cantor de Jazz", "Luzes da Cidade", "Metrópolis", "O Grande Ditador"],
      resposta: "O Cantor de Jazz"
    },
    {
      pergunta: "🎪 Em 'Casablanca', qual é o nome do café de Rick?",
      opcoes: ["Rick's Café", "Café Américain", "Blue Parrot", "Café de Paris"],
      resposta: "Café Américain"
    },
    {
      pergunta: "🎭 Qual filme de Hitchcock não tem música?",
      opcoes: ["Psicose", "Os Pássaros", "Janela Indiscreta", "Vertigo"],
      resposta: "Os Pássaros"
    },
    {
      pergunta: "🎨 Quem criou os efeitos especiais de '2001: Uma Odisseia no Espaço'?",
      opcoes: ["Douglas Trumbull", "Ray Harryhausen", "Willis O'Brien", "Jim Danforth"],
      resposta: "Douglas Trumbull"
    },
    {
      pergunta: "🎬 Qual foi o último filme mudo a ganhar o Oscar de Melhor Filme?",
      opcoes: ["O Artista", "Metrópolis", "Asas", "Aurora"],
      resposta: "O Artista"
    },
    {
      pergunta: "🎞️ Em que filme Orson Welles aparece em um espelho infinito?",
      opcoes: ["Cidadão Kane", "A Dama de Shanghai", "Soberba", "Sede de Mal"],
      resposta: "A Dama de Shanghai"
    },
    {
      pergunta: "🎭 Qual diretor criou o 'Dogma 95'?",
      opcoes: ["Lars von Trier", "Thomas Vinterberg", "Susanne Bier", "Nicolas Winding Refn"],
      resposta: "Lars von Trier"
    },
    {
      pergunta: "🎪 Quantos takes Kubrick fez da cena 'Here's Johnny' em 'O Iluminado'?",
      opcoes: ["60", "127", "89", "156"],
      resposta: "127"
    },
    {
      pergunta: "🎨 Qual filme de Tarkovsky dura mais de 3 horas?",
      opcoes: ["Andrei Rublev", "Stalker", "Solaris", "O Espelho"],
      resposta: "Andrei Rublev"
    },
    {
      pergunta: "🎬 Quem compôs a trilha de 'Blade Runner'?",
      opcoes: ["Vangelis", "Hans Zimmer", "John Williams", "Ennio Morricone"],
      resposta: "Vangelis"
    },
    {
      pergunta: "🎞️ Qual foi o primeiro filme colorido da Disney?",
      opcoes: ["Branca de Neve", "Fantasia", "Flores e Árvores", "Bambi"],
      resposta: "Flores e Árvores"
    }
  ]
};

const perguntasMusica = {
  normais: [
    {
      pergunta: "🎵 Qual banda lançou 'Bohemian Rhapsody'?",
      opcoes: ["Queen", "The Beatles", "Led Zeppelin", "Pink Floyd"],
      resposta: "Queen"
    },
    {
      pergunta: "🎸 Quem é conhecido como 'Rei do Pop'?",
      opcoes: ["Elvis Presley", "Michael Jackson", "Prince", "David Bowie"],
      resposta: "Michael Jackson"
    },
    {
      pergunta: "🎹 Qual instrumento Beethoven tocava principalmente?",
      opcoes: ["Violão", "Piano", "Violino", "Flauta"],
      resposta: "Piano"
    },
    {
      pergunta: "🥁 Qual banda criou 'Stairway to Heaven'?",
      opcoes: ["Deep Purple", "Led Zeppelin", "Black Sabbath", "AC/DC"],
      resposta: "Led Zeppelin"
    },
    {
      pergunta: "🎤 Quem cantou 'Like a Rolling Stone'?",
      opcoes: ["Bob Dylan", "Neil Young", "Leonard Cohen", "Johnny Cash"],
      resposta: "Bob Dylan"
    },
    {
      pergunta: "🎶 Qual álbum dos Beatles foi lançado em 1969?",
      opcoes: ["Abbey Road", "Sgt. Pepper's", "Revolver", "White Album"],
      resposta: "Abbey Road"
    },
    {
      pergunta: "🎸 Quem é o vocalista do Nirvana?",
      opcoes: ["Kurt Cobain", "Eddie Vedder", "Chris Cornell", "Layne Staley"],
      resposta: "Kurt Cobain"
    },
    {
      pergunta: "🎵 Qual cantora lançou 'Rolling in the Deep'?",
      opcoes: ["Adele", "Amy Winehouse", "Beyoncé", "Taylor Swift"],
      resposta: "Adele"
    },
    {
      pergunta: "🎹 Qual compositor criou 'Für Elise'?",
      opcoes: ["Mozart", "Beethoven", "Chopin", "Bach"],
      resposta: "Beethoven"
    },
    {
      pergunta: "🎤 Qual banda fez 'We Will Rock You'?",
      opcoes: ["Queen", "AC/DC", "Kiss", "Aerosmith"],
      resposta: "Queen"
    }
  ],
  dificeis: [
    {
      pergunta: "🎼 Qual é a tonalidade da 9ª Sinfonia de Beethoven?",
      opcoes: ["Ré menor", "Dó maior", "Sol maior", "Lá menor"],
      resposta: "Ré menor"
    },
    {
      pergunta: "🎺 Quem compôs 'As Quatro Estações'?",
      opcoes: ["Bach", "Vivaldi", "Mozart", "Handel"],
      resposta: "Vivaldi"
    },
    {
      pergunta: "🎵 Qual é o verdadeiro nome de Lady Gaga?",
      opcoes: ["Stefani Germanotta", "Robyn Fenty", "Alecia Moore", "Destiny Hope"],
      resposta: "Stefani Germanotta"
    },
    {
      pergunta: "🎸 Em que ano morreu Jimi Hendrix?",
      opcoes: ["1970", "1971", "1969", "1972"],
      resposta: "1970"
    },
    {
      pergunta: "🎹 Quantas sinfonias Beethoven compôs?",
      opcoes: ["7", "8", "9", "10"],
      resposta: "9"
    },
    {
      pergunta: "🎤 Qual banda punk foi formada em 1976 em Londres?",
      opcoes: ["Sex Pistols", "The Clash", "Ramones", "Dead Kennedys"],
      resposta: "Sex Pistols"
    },
    {
      pergunta: "🎵 Qual álbum do Pink Floyd tem mais de 45 minutos?",
      opcoes: ["The Wall", "Dark Side of the Moon", "Wish You Were Here", "Animals"],
      resposta: "The Wall"
    },
    {
      pergunta: "🎸 Quem inventou o theremin?",
      opcoes: ["Léon Theremin", "Robert Moog", "Les Paul", "Leo Fender"],
      resposta: "Léon Theremin"
    },
    {
      pergunta: "🎹 Qual é o nome real de Elton John?",
      opcoes: ["Reginald Dwight", "David Jones", "Farrokh Bulsara", "Gordon Sumner"],
      resposta: "Reginald Dwight"
    },
    {
      pergunta: "🎤 Qual festival aconteceu em 1969 em Nova York?",
      opcoes: ["Woodstock", "Monterey", "Altamont", "Isle of Wight"],
      resposta: "Woodstock"
    },
    {
      pergunta: "🎵 Quantas cordas tem um violino?",
      opcoes: ["4", "5", "6", "7"],
      resposta: "4"
    },
    {
      pergunta: "🎸 Qual banda gravou 'Hotel California'?",
      opcoes: ["Eagles", "Fleetwood Mac", "America", "Crosby, Stills & Nash"],
      resposta: "Eagles"
    },
    {
      pergunta: "🎹 Em que século viveu Bach?",
      opcoes: ["XVII-XVIII", "XVI-XVII", "XVIII-XIX", "XV-XVI"],
      resposta: "XVII-XVIII"
    },
    {
      pergunta: "🎤 Qual rapper lançou 'The Marshall Mathers LP'?",
      opcoes: ["Eminem", "50 Cent", "Dr. Dre", "Snoop Dogg"],
      resposta: "Eminem"
    },
    {
      pergunta: "🎵 Qual ópera de Mozart tem 'A Flauta Mágica'?",
      opcoes: ["Die Zauberflöte", "Don Giovanni", "Così fan tutte", "Le nozze di Figaro"],
      resposta: "Die Zauberflöte"
    }
  ]
};

const perguntasHistoria = {
  normais: [
    {
      pergunta: "🏰 Em que ano começou a Segunda Guerra Mundial?",
      opcoes: ["1938", "1939", "1940", "1941"],
      resposta: "1939"
    },
    {
      pergunta: "🗽 Quem foi o primeiro presidente dos EUA?",
      opcoes: ["Thomas Jefferson", "George Washington", "John Adams", "Benjamin Franklin"],
      resposta: "George Washington"
    },
    {
      pergunta: "🏛️ Qual império construiu o Coliseu?",
      opcoes: ["Grego", "Romano", "Bizantino", "Otomano"],
      resposta: "Romano"
    },
    {
      pergunta: "👑 Quem foi a rainha do Egito mais famosa?",
      opcoes: ["Nefertiti", "Cleópatra", "Hatshepsut", "Ankhesenamun"],
      resposta: "Cleópatra"
    },
    {
      pergunta: "🗿 Qual civilização construiu Machu Picchu?",
      opcoes: ["Asteca", "Maia", "Inca", "Olmeca"],
      resposta: "Inca"
    },
    {
      pergunta: "⚔️ Em que ano terminou a Primeira Guerra Mundial?",
      opcoes: ["1917", "1918", "1919", "1920"],
      resposta: "1918"
    },
    {
      pergunta: "🏺 Qual faraó construiu a Grande Pirâmide?",
      opcoes: ["Quéops", "Quéfren", "Miquerinos", "Tutancâmon"],
      resposta: "Quéops"
    },
    {
      pergunta: "🌍 Qual navegador descobriu o Brasil?",
      opcoes: ["Vasco da Gama", "Pedro Álvares Cabral", "Cristóvão Colombo", "Fernão de Magalhães"],
      resposta: "Pedro Álvares Cabral"
    },
    {
      pergunta: "🏛️ Onde nasceu a democracia?",
      opcoes: ["Roma", "Atenas", "Esparta", "Tebas"],
      resposta: "Atenas"
    },
    {
      pergunta: "👨‍⚖️ Quem foi o primeiro imperador romano?",
      opcoes: ["Júlio César", "Augusto", "Nero", "Trajano"],
      resposta: "Augusto"
    }
  ],
  dificeis: [
    {
      pergunta: "⚔️ Qual batalha marcou o fim de Napoleão?",
      opcoes: ["Waterloo", "Austerlitz", "Leipzig", "Borodino"],
      resposta: "Waterloo"
    },
    {
      pergunta: "🏺 Em que ano caiu Constantinopla?",
      opcoes: ["1453", "1492", "1521", "1571"],
      resposta: "1453"
    },
    {
      pergunta: "👑 Qual dinastia chinesa construiu a Cidade Proibida?",
      opcoes: ["Ming", "Qing", "Tang", "Song"],
      resposta: "Ming"
    },
    {
      pergunta: "⚡ Qual tratado encerrou a Guerra dos Trinta Anos?",
      opcoes: ["Vestfália", "Utrecht", "Viena", "Versalhes"],
      resposta: "Vestfália"
    },
    {
      pergunta: "🗡️ Em que ano ocorreu a Batalha de Hastings?",
      opcoes: ["1066", "1086", "1096", "1106"],
      resposta: "1066"
    },
    {
      pergunta: "🏛️ Qual imperador romano legalizou o cristianismo?",
      opcoes: ["Constantino", "Teodósio", "Diocleciano", "Justiniano"],
      resposta: "Constantino"
    },
    {
      pergunta: "📜 Qual código de leis foi criado na Babilônia?",
      opcoes: ["Código de Hamurabi", "Lei das XII Tábuas", "Corpus Juris Civilis", "Código de Justiniano"],
      resposta: "Código de Hamurabi"
    },
    {
      pergunta: "🌊 Qual civilização criou a escrita cuneiforme?",
      opcoes: ["Suméria", "Babilônica", "Assíria", "Persa"],
      resposta: "Suméria"
    },
    {
      pergunta: "⚔️ Qual guerra durou 116 anos?",
      opcoes: ["Guerra dos Cem Anos", "Guerra dos Trinta Anos", "Guerra de Reconquista", "Guerra das Rosas"],
      resposta: "Guerra dos Cem Anos"
    },
    {
      pergunta: "🏰 Qual foi a primeira capital do Império Bizantino?",
      opcoes: ["Constantinopla", "Niceia", "Trebizonda", "Tessalônica"],
      resposta: "Constantinopla"
    },
    {
      pergunta: "📚 Qual biblioteca antiga foi destruída em Alexandria?",
      opcoes: ["Biblioteca de Alexandria", "Biblioteca de Pérgamo", "Biblioteca de Atenas", "Biblioteca de Roma"],
      resposta: "Biblioteca de Alexandria"
    },
    {
      pergunta: "👑 Qual rainha egípcia se aliou a Júlio César?",
      opcoes: ["Cleópatra VII", "Nefertiti", "Hatshepsut", "Cleópatra I"],
      resposta: "Cleópatra VII"
    },
    {
      pergunta: "⚡ Em que ano foi assinada a Magna Carta?",
      opcoes: ["1215", "1225", "1235", "1245"],
      resposta: "1215"
    },
    {
      pergunta: "🗿 Qual civilização construiu as cabeças olmecas?",
      opcoes: ["Olmeca", "Maia", "Asteca", "Zapoteca"],
      resposta: "Olmeca"
    },
    {
      pergunta: "🏛️ Qual filósofo foi professor de Alexandre, o Grande?",
      opcoes: ["Aristóteles", "Platão", "Sócrates", "Epicuro"],
      resposta: "Aristóteles"
    }
  ]
};

const perguntasCiencia = {
  normais: [
    {
      pergunta: "🧪 Qual é o elemento químico mais abundante no universo?",
      opcoes: ["Oxigênio", "Carbono", "Hidrogênio", "Hélio"],
      resposta: "Hidrogênio"
    },
    {
      pergunta: "🌍 Quantos planetas tem o sistema solar?",
      opcoes: ["7", "8", "9", "10"],
      resposta: "8"
    },
    {
      pergunta: "🔬 Quem desenvolveu a teoria da relatividade?",
      opcoes: ["Newton", "Einstein", "Galileu", "Darwin"],
      resposta: "Einstein"
    },
    {
      pergunta: "🧬 Qual é a unidade básica da vida?",
      opcoes: ["Átomo", "Célula", "Molécula", "Tecido"],
      resposta: "Célula"
    },
    {
      pergunta: "⚡ Qual é a fórmula da água?",
      opcoes: ["H2O", "CO2", "O2", "H2SO4"],
      resposta: "H2O"
    },
    {
      pergunta: "🌡️ A que temperatura a água ferve?",
      opcoes: ["90°C", "100°C", "110°C", "120°C"],
      resposta: "100°C"
    },
    {
      pergunta: "🦴 Quantos ossos tem o corpo humano adulto?",
      opcoes: ["196", "206", "216", "226"],
      resposta: "206"
    },
    {
      pergunta: "🌙 Qual é o satélite natural da Terra?",
      opcoes: ["Lua", "Sol", "Marte", "Vênus"],
      resposta: "Lua"
    },
    {
      pergunta: "🔋 Qual é o símbolo químico do ouro?",
      opcoes: ["Au", "Ag", "Fe", "Cu"],
      resposta: "Au"
    },
    {
      pergunta: "🌱 Qual processo as plantas usam para produzir energia?",
      opcoes: ["Respiração", "Fotossíntese", "Digestão", "Fermentação"],
      resposta: "Fotossíntese"
    }
  ],
  dificeis: [
    {
      pergunta: "⚙️ Qual é a constante de Planck?",
      opcoes: ["6.626 x 10^-34", "3.14159", "2.718", "1.618"],
      resposta: "6.626 x 10^-34"
    },
    {
      pergunta: "🌌 Qual é a velocidade da luz no vácuo?",
      opcoes: ["299.792.458 m/s", "300.000.000 m/s", "186.000 mi/s", "Todas anteriores"],
      resposta: "299.792.458 m/s"
    },
    {
      pergunta: "🧬 Quantos cromossomos tem o ser humano?",
      opcoes: ["44", "46", "48", "50"],
      resposta: "46"
    },
    {
      pergunta: "⚛️ Qual partícula subatômica tem carga negativa?",
      opcoes: ["Próton", "Nêutron", "Elétron", "Pósitron"],
      resposta: "Elétron"
    },
    {
      pergunta: "🌡️ Qual é o zero absoluto em Celsius?",
      opcoes: ["-273,15°C", "-273°C", "-270°C", "-280°C"],
      resposta: "-273,15°C"
    },
    {
      pergunta: "🔬 Quem descobriu a penicilina?",
      opcoes: ["Alexander Fleming", "Louis Pasteur", "Marie Curie", "Gregor Mendel"],
      resposta: "Alexander Fleming"
    },
    {
      pergunta: "🧪 Qual é o número atômico do carbono?",
      opcoes: ["4", "6", "8", "12"],
      resposta: "6"
    },
    {
      pergunta: "🌊 Qual é a fórmula da lei de Ohm?",
      opcoes: ["V = I × R", "E = mc²", "F = ma", "P = VI"],
      resposta: "V = I × R"
    },
    {
      pergunta: "🦠 Qual cientista propôs a teoria da evolução?",
      opcoes: ["Charles Darwin", "Gregor Mendel", "Louis Pasteur", "Alfred Wallace"],
      resposta: "Charles Darwin"
    },
    {
      pergunta: "⚗️ Qual é o pH da água pura?",
      opcoes: ["6", "7", "8", "9"],
      resposta: "7"
    },
    {
      pergunta: "🌌 Qual é a galáxia mais próxima da Via Láctea?",
      opcoes: ["Andrômeda", "Triângulo", "Centauro A", "Magalhães"],
      resposta: "Andrômeda"
    },
    {
      pergunta: "🧬 Qual base nitrogenada não existe no DNA?",
      opcoes: ["Adenina", "Uracila", "Guanina", "Citosina"],
      resposta: "Uracila"
    },
    {
      pergunta: "⚛️ Qual elemento tem o símbolo Pb?",
      opcoes: ["Chumbo", "Platina", "Paládio", "Polônio"],
      resposta: "Chumbo"
    },
    {
      pergunta: "🔬 Quantas câmaras tem o coração humano?",
      opcoes: ["2", "3", "4", "5"],
      resposta: "4"
    },
    {
      pergunta: "🌡️ Em que temperatura Celsius e Fahrenheit se igualam?",
      opcoes: ["-40°", "-32°", "0°", "32°"],
      resposta: "-40°"
    }
  ]
};

const generos = {
  cinema: perguntasCinema,
  musica: perguntasMusica,
  historia: perguntasHistoria,
  ciencia: perguntasCiencia
};

let generoAtual = 'cinema';
let modoJogo = 'normal';
let tempoLimite = 0;
let timerInterval;
let perguntaAtual = 0;
let pontuacao = 0;
let perguntas = [];

const quiz = document.getElementById("quiz");
const nextBtn = document.getElementById("next-btn");
const result = document.getElementById("result");
const progressBar = document.getElementById("progress-bar");
const questionCounter = document.getElementById("question-counter");
const homeScreen = document.getElementById("home-screen");
const quizHeader = document.querySelector(".quiz-header");
const quizFooter = document.querySelector(".quiz-footer");
const timerContainer = document.getElementById("timer-container");
const timerElement = document.getElementById("timer");
const modeCards = document.querySelectorAll(".mode-card");
const genreTabs = document.querySelectorAll(".genre-tab");

function selecionarGenero(genero) {
  genreTabs.forEach(tab => tab.classList.remove("active"));
  event.target.classList.add("active");
  generoAtual = genero;
  
  const temas = {
    cinema: {
      titulo: "🎬 Quiz Cinéfilo",
      cores: ['#e50914', '#ff4444'],
      fundo: '#1a1a2e',
      card: 'rgba(229, 9, 20, 0.1)',
      borda: 'rgba(229, 9, 20, 0.2)'
    },
    musica: {
      titulo: "🎵 Quiz Musical",
      cores: ['#1db954', '#4caf50'],
      fundo: '#0d4f1c',
      card: 'rgba(29, 185, 84, 0.1)',
      borda: 'rgba(29, 185, 84, 0.2)'
    },
    historia: {
      titulo: "📚 Quiz de História",
      cores: ['#ff9800', '#ffc107'],
      fundo: '#4a2c00',
      card: 'rgba(255, 152, 0, 0.1)',
      borda: 'rgba(255, 152, 0, 0.2)'
    },
    ciencia: {
      titulo: "🔬 Quiz de Ciência",
      cores: ['#2196f3', '#03a9f4'],
      fundo: '#0d2a4a',
      card: 'rgba(33, 150, 243, 0.1)',
      borda: 'rgba(33, 150, 243, 0.2)'
    }
  };
  
  const tema = temas[genero];
  document.querySelector('.home-screen h1').textContent = tema.titulo;
  document.documentElement.style.setProperty('--cor-primaria', tema.cores[0]);
  document.documentElement.style.setProperty('--cor-secundaria', tema.cores[1]);
  document.documentElement.style.setProperty('--cor-fundo', tema.fundo);
  document.documentElement.style.setProperty('--cor-card', tema.card);
  document.documentElement.style.setProperty('--cor-borda', tema.borda);
}

function selecionarModo(modo) {
  modeCards.forEach(card => card.classList.remove("selected"));
  event.target.closest(".mode-card").classList.add("selected");
  
  modoJogo = modo;
  const perguntasGenero = generos[generoAtual];
  
  switch(modo) {
    case 'normal':
      perguntas = [...perguntasGenero.normais];
      tempoLimite = 0;
      break;
    case 'rapido':
      perguntas = [...perguntasGenero.normais];
      tempoLimite = 15;
      break;
    case 'dificil':
      perguntas = [...perguntasGenero.dificeis];
      tempoLimite = 0;
      break;
    case 'desafio':
      perguntas = [...perguntasGenero.dificeis];
      tempoLimite = 10;
      break;
  }
  
  setTimeout(() => iniciarQuiz(), 500);
}

function iniciarQuiz() {
  homeScreen.classList.add("hidden");
  quizHeader.classList.remove("hidden");
  quiz.classList.remove("hidden");
  quizFooter.classList.remove("hidden");
  
  const temas = {
    cinema: "🎬 Quiz Cinéfilo",
    musica: "🎵 Quiz Musical",
    historia: "📚 Quiz de História",
    ciencia: "🔬 Quiz de Ciência"
  };
  
  document.querySelector('.quiz-header h1').textContent = temas[generoAtual];
  
  if (tempoLimite > 0) {
    timerContainer.classList.remove("hidden");
  }
  
  mostrarPergunta();
}

function iniciarTimer() {
  if (tempoLimite <= 0) return;
  
  let tempo = tempoLimite;
  timerElement.textContent = tempo;
  timerElement.classList.remove("warning");
  
  timerInterval = setInterval(() => {
    tempo--;
    timerElement.textContent = tempo;
    
    if (tempo <= 5) {
      timerElement.classList.add("warning");
    }
    
    if (tempo <= 0) {
      clearInterval(timerInterval);
      tempoEsgotado();
    }
  }, 1000);
}

function pararTimer() {
  if (timerInterval) {
    clearInterval(timerInterval);
  }
}

function tempoEsgotado() {
  const opcoes = document.querySelectorAll(".option");
  opcoes.forEach(btn => {
    btn.onclick = null;
    btn.style.cursor = "default";
    
    const textoOpcao = btn.innerHTML.split('</span>')[1];
    if (textoOpcao === perguntas[perguntaAtual].resposta) {
      btn.classList.add("correct");
    } else {
      btn.style.opacity = "0.4";
    }
  });
  
  setTimeout(() => {
    nextBtn.classList.remove("hidden");
  }, 1500);
}

function atualizarProgresso() {
  const progresso = ((perguntaAtual + 1) / perguntas.length) * 100;
  progressBar.style.width = `${progresso}%`;
  questionCounter.textContent = `${perguntaAtual + 1} / ${perguntas.length}`;
}

function mostrarPergunta() {
  result.classList.add("hidden");
  quiz.innerHTML = "";
  
  atualizarProgresso();
  iniciarTimer();

  const p = perguntas[perguntaAtual];

  const perguntaEl = document.createElement("div");
  perguntaEl.className = "question";
  perguntaEl.textContent = p.pergunta;
  quiz.appendChild(perguntaEl);

  const optionsContainer = document.createElement("div");
  optionsContainer.className = "options-container";

  p.opcoes.forEach((opcao, index) => {
    const btn = document.createElement("div");
    btn.classList.add("option");
    btn.innerHTML = `<span style="font-weight: 600; color: rgba(255,255,255,0.6); margin-right: 12px;">${String.fromCharCode(65 + index)})</span>${opcao}`;
    btn.onclick = () => selecionarResposta(btn, p.resposta, opcao);
    optionsContainer.appendChild(btn);
  });

  quiz.appendChild(optionsContainer);
}

function selecionarResposta(botao, respostaCorreta, respostaSelecionada) {
  pararTimer();
  const opcoes = document.querySelectorAll(".option");

  opcoes.forEach(btn => {
    btn.onclick = null;
    btn.style.cursor = "default";
  });

  opcoes.forEach(btn => {
    const textoOpcao = btn.innerHTML.split('</span>')[1];
    if (textoOpcao === respostaCorreta) {
      btn.classList.add("correct");
    }
  });

  if (respostaSelecionada !== respostaCorreta) {
    botao.classList.add("wrong");
  } else {
    pontuacao++;
  }

  opcoes.forEach(btn => {
    if (!btn.classList.contains("correct") && !btn.classList.contains("wrong")) {
      btn.style.opacity = "0.4";
    }
  });

  setTimeout(() => {
    nextBtn.classList.remove("hidden");
  }, 800);
}

nextBtn.addEventListener("click", () => {
  perguntaAtual++;
  if (perguntaAtual < perguntas.length) {
    mostrarPergunta();
    nextBtn.classList.add("hidden");
  } else {
    mostrarResultado();
  }
});

function mostrarResultado() {
  quiz.innerHTML = "";
  quizHeader.classList.add("hidden");
  quizFooter.classList.add("hidden");
  result.classList.remove("hidden");

  const porcentagem = Math.round((pontuacao / perguntas.length) * 100);
  let emoji, titulo, mensagem;

  if (porcentagem >= 90) {
    emoji = "🏆";
    titulo = "Expert Master!";
    mensagem = "Você é um verdadeiro especialista!";
  } else if (porcentagem >= 70) {
    emoji = "🎯";
    titulo = "Conhecedor Experiente!";
    mensagem = "Você tem um ótimo conhecimento!";
  } else if (porcentagem >= 50) {
    emoji = "📚";
    titulo = "Em Desenvolvimento!";
    mensagem = "Continue estudando!";
  } else {
    emoji = "🌱";
    titulo = "Iniciante!";
    mensagem = "Há muito para aprender!";
  }

  const generoTexto = {
    'cinema': 'Cinema',
    'musica': 'Música', 
    'historia': 'História',
    'ciencia': 'Ciência'
  };

  const modoTexto = {
    'normal': 'Normal',
    'rapido': 'Rápido',
    'dificil': 'Difícil',
    'desafio': 'Desafio'
  };

  result.innerHTML = `
    <div style="font-size: 4rem; margin-bottom: 20px;">${emoji}</div>
    <h2>${titulo}</h2>
    <div class="score-display">${pontuacao}/${perguntas.length}</div>
    <p style="font-size: 1.1rem; margin-bottom: 10px;">Você acertou ${porcentagem}% das perguntas!</p>
    <p style="font-size: 0.9rem; color: rgba(255,255,255,0.6); margin-bottom: 15px;">${generoTexto[generoAtual]} - ${modoTexto[modoJogo]}</p>
    <p>${mensagem}</p>
    <button class="btn-primary" onclick="location.reload()" style="margin-top: 30px;">🔄 Jogar Novamente</button>
  `;
  nextBtn.classList.add("hidden");
}

// Event listeners
genreTabs.forEach(tab => {
  tab.addEventListener("click", () => {
    const genero = tab.dataset.genre;
    selecionarGenero(genero);
  });
});

modeCards.forEach(card => {
  card.addEventListener("click", () => {
    const modo = card.dataset.mode;
    selecionarModo(modo);
  });
});

// Inicializar tema padrão ao carregar
window.addEventListener('DOMContentLoaded', () => {
  const tema = {
    titulo: "🎬 Quiz Cinéfilo",
    cores: ['#e50914', '#ff4444'],
    fundo: '#1a1a2e',
    card: 'rgba(229, 9, 20, 0.1)',
    borda: 'rgba(229, 9, 20, 0.2)'
  };
  
  document.querySelector('.home-screen h1').textContent = tema.titulo;
  document.documentElement.style.setProperty('--cor-primaria', tema.cores[0]);
  document.documentElement.style.setProperty('--cor-secundaria', tema.cores[1]);
  document.documentElement.style.setProperty('--cor-fundo', tema.fundo);
  document.documentElement.style.setProperty('--cor-card', tema.card);
  document.documentElement.style.setProperty('--cor-borda', tema.borda);
});

nextBtn.classList.add("hidden");